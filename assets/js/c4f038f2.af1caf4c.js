"use strict";(globalThis.webpackChunkvbrowser_documentation=globalThis.webpackChunkvbrowser_documentation||[]).push([[585],{3660(e,n,s){s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"browsers/image-lifecycle","title":"Image Lifecycle","description":"Open vBrowser (OvB) manages browser environments through a controlled image lifecycle that governs how browser images are selected, built, distributed, and executed. This lifecycle is designed to ensure repeatability, security, and minimal attack surface.","source":"@site/docs/browsers/image-lifecycle.md","sourceDirName":"browsers","slug":"/browsers/image-lifecycle","permalink":"/docs/browsers/image-lifecycle","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Custom Browser Images","permalink":"/docs/browsers/custom-images"},"next":{"title":"Usage","permalink":"/docs/category/usage"}}');var r=s(4848),l=s(8453);const t={sidebar_position:3},o="Image Lifecycle",c={},d=[{value:"Lifecycle Overview",id:"lifecycle-overview",level:2},{value:"Step 1: Image Selection",id:"step-1-image-selection",level:2},{value:"Step 2: Image Build",id:"step-2-image-build",level:2},{value:"Step 3: Image Push (ECR)",id:"step-3-image-push-ecr",level:2},{value:"Step 4: ECS Registration",id:"step-4-ecs-registration",level:2},{value:"Step 5: Runtime Execution",id:"step-5-runtime-execution",level:2},{value:"Step 6: Session Termination",id:"step-6-session-termination",level:2},{value:"Image Versioning",id:"image-versioning",level:2},{value:"Security Properties",id:"security-properties",level:2},{value:"Common Failure Modes",id:"common-failure-modes",level:2},{value:"Operator Responsibilities",id:"operator-responsibilities",level:2},{value:"Next Steps",id:"next-steps",level:2}];function a(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"image-lifecycle",children:"Image Lifecycle"})}),"\n",(0,r.jsxs)(n.p,{children:["Open vBrowser (OvB) manages browser environments through a ",(0,r.jsx)(n.strong,{children:"controlled image lifecycle"})," that governs how browser images are selected, built, distributed, and executed. This lifecycle is designed to ensure repeatability, security, and minimal attack surface."]}),"\n",(0,r.jsxs)(n.p,{children:["This document explains the ",(0,r.jsx)(n.strong,{children:"end-to-end lifecycle of browser images"})," within OvB."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"lifecycle-overview",children:"Lifecycle Overview"}),"\n",(0,r.jsx)(n.p,{children:"Each browser image in OvB follows this lifecycle:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Image selection during setup"}),"\n",(0,r.jsxs)(n.li,{children:["Image build via ",(0,r.jsx)(n.code,{children:"containers-updater"})]}),"\n",(0,r.jsx)(n.li,{children:"Image push to AWS ECR"}),"\n",(0,r.jsx)(n.li,{children:"Image registration in ECS"}),"\n",(0,r.jsx)(n.li,{children:"Image execution as ephemeral tasks"}),"\n",(0,r.jsx)(n.li,{children:"Image destruction at session end"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"At no point are browser images modified at runtime."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"step-1-image-selection",children:"Step 1: Image Selection"}),"\n",(0,r.jsxs)(n.p,{children:["Image selection occurs during execution of ",(0,r.jsx)(n.code,{children:"setup.sh"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"During this step:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"A default browser set is offered"}),"\n",(0,r.jsx)(n.li,{children:"Operators may select a custom subset"}),"\n",(0,r.jsxs)(n.li,{children:["Selected images remain in ",(0,r.jsx)(n.code,{children:"vbrowsers/"})]}),"\n",(0,r.jsxs)(n.li,{children:["Unselected images are moved to ",(0,r.jsx)(n.code,{children:"unused/"})]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Only selected images are considered ",(0,r.jsx)(n.strong,{children:"approved for execution"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"This enforces explicit operator intent."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"step-2-image-build",children:"Step 2: Image Build"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"containers-updater"})," service builds browser images locally using Docker."]}),"\n",(0,r.jsx)(n.p,{children:"Characteristics:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"One image per browser"}),"\n",(0,r.jsx)(n.li,{children:"Deterministic builds"}),"\n",(0,r.jsx)(n.li,{children:"No runtime dependencies on host state"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Build failures stop the lifecycle early and must be resolved before proceeding."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"step-3-image-push-ecr",children:"Step 3: Image Push (ECR)"}),"\n",(0,r.jsx)(n.p,{children:"After successful builds:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Images are tagged consistently"}),"\n",(0,r.jsx)(n.li,{children:"Images are pushed to AWS ECR"}),"\n",(0,r.jsx)(n.li,{children:"ECS-compatible image references are created"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["ECR acts as the ",(0,r.jsx)(n.strong,{children:"single distribution source"})," for browser images."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"step-4-ecs-registration",children:"Step 4: ECS Registration"}),"\n",(0,r.jsx)(n.p,{children:"Terraform generates ECS task definitions that reference:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"The ECR image URI"}),"\n",(0,r.jsx)(n.li,{children:"Required execution roles"}),"\n",(0,r.jsx)(n.li,{children:"Logging configuration"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Each browser has its own task definition."}),"\n",(0,r.jsx)(n.p,{children:"This ensures:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Isolation between browsers"}),"\n",(0,r.jsx)(n.li,{children:"Clear auditability"}),"\n",(0,r.jsx)(n.li,{children:"Controlled execution permissions"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"step-5-runtime-execution",children:"Step 5: Runtime Execution"}),"\n",(0,r.jsx)(n.p,{children:"When a browser session is launched:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"ECS starts a new task"}),"\n",(0,r.jsx)(n.li,{children:"The browser image is pulled from ECR"}),"\n",(0,r.jsx)(n.li,{children:"The browser runs inside an isolated container"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Runtime characteristics:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"One browser per task"}),"\n",(0,r.jsx)(n.li,{children:"No shared storage"}),"\n",(0,r.jsx)(n.li,{children:"No persistent filesystem"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"step-6-session-termination",children:"Step 6: Session Termination"}),"\n",(0,r.jsx)(n.p,{children:"Browser sessions end when:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"The user closes the session"}),"\n",(0,r.jsx)(n.li,{children:"An idle timeout is reached"}),"\n",(0,r.jsx)(n.li,{children:"The task is explicitly stopped"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"On termination:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"The ECS task is destroyed"}),"\n",(0,r.jsx)(n.li,{children:"All filesystem and memory state is lost"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"There is no cleanup phase, destruction is the cleanup."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"image-versioning",children:"Image Versioning"}),"\n",(0,r.jsx)(n.p,{children:"OvB does not currently support dynamic image version pinning."}),"\n",(0,r.jsx)(n.p,{children:"Images are rebuilt during:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Initial deployment"}),"\n",(0,r.jsx)(n.li,{children:"Re-deployment after teardown"}),"\n",(0,r.jsx)(n.li,{children:"Browser configuration changes"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Operators should treat images as ",(0,r.jsx)(n.strong,{children:"deployment-scoped artifacts"}),"."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"security-properties",children:"Security Properties"}),"\n",(0,r.jsx)(n.p,{children:"The image lifecycle enforces:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"No runtime mutation"}),"\n",(0,r.jsx)(n.li,{children:"No persistence between sessions"}),"\n",(0,r.jsx)(n.li,{children:"No cross-browser contamination"}),"\n",(0,r.jsx)(n.li,{children:"No long-lived compromised environments"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"If a browser image is suspected to be compromised:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Perform teardown"}),"\n",(0,r.jsx)(n.li,{children:"Re-run setup"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"common-failure-modes",children:"Common Failure Modes"}),"\n",(0,r.jsx)(n.p,{children:"Common lifecycle issues include:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Build failures due to missing dependencies"}),"\n",(0,r.jsx)(n.li,{children:"ECR push permission errors"}),"\n",(0,r.jsx)(n.li,{children:"ECS task start failures"}),"\n",(0,r.jsx)(n.li,{children:"Stale images after partial teardown"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"The supported recovery path is always:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Full teardown"}),"\n",(0,r.jsx)(n.li,{children:"Clean redeploy"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"operator-responsibilities",children:"Operator Responsibilities"}),"\n",(0,r.jsx)(n.p,{children:"Operators are responsible for:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Reviewing browser images"}),"\n",(0,r.jsx)(n.li,{children:"Limiting enabled browsers"}),"\n",(0,r.jsx)(n.li,{children:"Monitoring updater logs"}),"\n",(0,r.jsx)(n.li,{children:"Destroying environments when needed"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"The lifecycle enforces controls, but does not replace judgment."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,r.jsx)(n.p,{children:"To understand how browser sessions use these images:"}),"\n",(0,r.jsxs)(n.p,{children:["Continue to ",(0,r.jsx)(n.strong,{children:"Usage"})]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8453(e,n,s){s.d(n,{R:()=>t,x:()=>o});var i=s(6540);const r={},l=i.createContext(r);function t(e){const n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);