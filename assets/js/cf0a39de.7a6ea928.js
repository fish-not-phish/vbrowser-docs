"use strict";(globalThis.webpackChunkvbrowser_documentation=globalThis.webpackChunkvbrowser_documentation||[]).push([[660],{4656(e,n,i){i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>t,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"installation/cloudflare","title":"Cloudflare Configuration","description":"Open vBrowser (OvB) requires Cloudflare to manage DNS records and provide origin shielding for backend services. Cloudflare acts as a protective boundary between the public internet and OvB\u2019s AWS infrastructure.","source":"@site/docs/installation/cloudflare.md","sourceDirName":"installation","slug":"/installation/cloudflare","permalink":"/docs/installation/cloudflare","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"AWS Configuration","permalink":"/docs/installation/aws"},"next":{"title":"Setup Script","permalink":"/docs/installation/script-setup"}}');var s=i(4848),l=i(8453);const o={sidebar_position:3},t="Cloudflare Configuration",d={},c=[{value:"Why Cloudflare Is Required",id:"why-cloudflare-is-required",level:2},{value:"Cloudflare Account Requirements",id:"cloudflare-account-requirements",level:2},{value:"Required Cloudflare Components",id:"required-cloudflare-components",level:2},{value:"Zone ID",id:"zone-id",level:2},{value:"API Token Configuration",id:"api-token-configuration",level:2},{value:"Recommended Token Settings",id:"recommended-token-settings",level:3},{value:"How OvB Uses the Cloudflare API",id:"how-ovb-uses-the-cloudflare-api",level:2},{value:"DNS Propagation Considerations",id:"dns-propagation-considerations",level:2},{value:"Security Considerations",id:"security-considerations",level:2},{value:"Common Misconfigurations",id:"common-misconfigurations",level:2},{value:"Next Steps",id:"next-steps",level:2}];function a(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"cloudflare-configuration",children:"Cloudflare Configuration"})}),"\n",(0,s.jsxs)(n.p,{children:["Open vBrowser (OvB) requires ",(0,s.jsx)(n.strong,{children:"Cloudflare"})," to manage DNS records and provide origin shielding for backend services. Cloudflare acts as a protective boundary between the public internet and OvB\u2019s AWS infrastructure."]}),"\n",(0,s.jsxs)(n.p,{children:["This document explains ",(0,s.jsx)(n.strong,{children:"why Cloudflare is required"}),", ",(0,s.jsx)(n.strong,{children:"how it is used"}),", and ",(0,s.jsx)(n.strong,{children:"how to configure it safely"}),"."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"why-cloudflare-is-required",children:"Why Cloudflare Is Required"}),"\n",(0,s.jsx)(n.p,{children:"OvB uses Cloudflare to:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Manage DNS records dynamically"}),"\n",(0,s.jsx)(n.li,{children:"Shield AWS infrastructure from direct exposure"}),"\n",(0,s.jsx)(n.li,{children:"Terminate TLS at the edge"}),"\n",(0,s.jsx)(n.li,{children:"Reduce attack surface of backend services"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Cloudflare is ",(0,s.jsx)(n.strong,{children:"not optional"}),". Deployments without Cloudflare are unsupported. However, Cloudflare is free to use."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"cloudflare-account-requirements",children:"Cloudflare Account Requirements"}),"\n",(0,s.jsx)(n.p,{children:"You must have:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["A Cloudflare account (free tier is sufficient)","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Go here: ",(0,s.jsx)(n.a,{href:"https://dash.cloudflare.com/sign-up",children:"https://dash.cloudflare.com/sign-up"})," to create a new account if you do not have one."]}),"\n",(0,s.jsx)(n.li,{children:"Ensure you only select the free-tier."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.li,{children:"A domain added to Cloudflare"}),"\n",(0,s.jsx)(n.li,{children:"Control over the domain\u2019s DNS"}),"\n",(0,s.jsx)(n.li,{children:"Ability to create API tokens"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Domain nameservers must be delegated to Cloudflare and DNS propagation must be complete before setup."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"required-cloudflare-components",children:"Required Cloudflare Components"}),"\n",(0,s.jsx)(n.p,{children:"OvB relies on the following Cloudflare features:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"DNS zone management"}),"\n",(0,s.jsx)(n.li,{children:"API token authentication"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"No advanced or paid Cloudflare features are required."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"zone-id",children:"Zone ID"}),"\n",(0,s.jsxs)(n.p,{children:["Each domain in Cloudflare has a unique ",(0,s.jsx)(n.strong,{children:"Zone ID"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"To locate it:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Log in to the Cloudflare dashboard"}),"\n",(0,s.jsx)(n.li,{children:"Select your domain"}),"\n",(0,s.jsxs)(n.li,{children:["Navigate to the ",(0,s.jsx)(n.strong,{children:"Overview"})," page"]}),"\n",(0,s.jsxs)(n.li,{children:["Scroll down and locate ",(0,s.jsx)(n.strong,{children:"Zone ID"})," near the bottom right of the webpage."]}),"\n",(0,s.jsxs)(n.li,{children:["Copy the ",(0,s.jsx)(n.strong,{children:"Zone ID"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"The Zone ID is required during OvB setup."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"api-token-configuration",children:"API Token Configuration"}),"\n",(0,s.jsxs)(n.p,{children:["OvB requires a Cloudflare API token with ",(0,s.jsx)(n.strong,{children:"minimal permissions"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"recommended-token-settings",children:"Recommended Token Settings"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Log in to the Cloudflare dashboard"}),"\n",(0,s.jsxs)(n.li,{children:["On the top right, click your profile icon and select ",(0,s.jsx)(n.strong,{children:"Profile"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["On the left navigation sidebar of the profile webpage, select ",(0,s.jsx)(n.strong,{children:"API Tokens"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Click ",(0,s.jsx)(n.strong,{children:"Create Token"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Under ",(0,s.jsx)(n.strong,{children:"API token templates"})," select ",(0,s.jsx)(n.strong,{children:"Use template"})," for ",(0,s.jsx)(n.strong,{children:"Edit zone DNS"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Permissions"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Zone \u2192 DNS \u2192 Edit"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Resources"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Include \u2192 Specific zone \u2192 Your domain"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{type:"caution",children:(0,s.jsx)(n.p,{children:"Do not use the Global API Key.\nIt grants full account access and significantly increases risk."})}),"\n",(0,s.jsx)(n.p,{children:"Once created, copy the token securely. It will only be shown once."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"how-ovb-uses-the-cloudflare-api",children:"How OvB Uses the Cloudflare API"}),"\n",(0,s.jsx)(n.p,{children:"OvB uses the Cloudflare API to:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Create and update DNS records"}),"\n",(0,s.jsx)(n.li,{children:"Perform DNS-based certificate validation"}),"\n",(0,s.jsxs)(n.li,{children:["Manage subdomains (e.g., ",(0,s.jsx)(n.code,{children:"browser-123456abcdef.vbrowser.io"}),")"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["The API is ",(0,s.jsx)(n.strong,{children:"not"})," used for:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Traffic inspection"}),"\n",(0,s.jsx)(n.li,{children:"Content filtering"}),"\n",(0,s.jsx)(n.li,{children:"Identity verification"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"dns-propagation-considerations",children:"DNS Propagation Considerations"}),"\n",(0,s.jsx)(n.p,{children:"DNS changes may take time to propagate."}),"\n",(0,s.jsx)(n.p,{children:"Common propagation delays:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Initial nameserver delegation: minutes to hours"}),"\n",(0,s.jsx)(n.li,{children:"Record creation: seconds to minutes"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"If setup fails with DNS-related errors:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Verify nameservers are correct"}),"\n",(0,s.jsx)(n.li,{children:"Confirm Zone ID and token permissions"}),"\n",(0,s.jsx)(n.li,{children:"Wait for propagation and retry"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"security-considerations",children:"Security Considerations"}),"\n",(0,s.jsx)(n.p,{children:"Cloudflare improves security by:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Hiding AWS origin IPs"}),"\n",(0,s.jsx)(n.li,{children:"Absorbing unsolicited traffic"}),"\n",(0,s.jsx)(n.li,{children:"Reducing direct attack surface"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Cloudflare does ",(0,s.jsx)(n.strong,{children:"not"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Guarantee anonymity"}),"\n",(0,s.jsx)(n.li,{children:"Prevent browser exploitation"}),"\n",(0,s.jsx)(n.li,{children:"Replace OPSEC practices"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"It is a defensive layer, not a complete security solution."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"common-misconfigurations",children:"Common Misconfigurations"}),"\n",(0,s.jsx)(n.p,{children:"Common Cloudflare issues include:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Using the Global API key"}),"\n",(0,s.jsx)(n.li,{children:"Incorrect Zone ID"}),"\n",(0,s.jsx)(n.li,{children:"DNS not fully propagated"}),"\n",(0,s.jsx)(n.li,{children:"Insufficient token permissions"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"These issues typically result in failed setup or certificate errors."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,s.jsx)(n.p,{children:"After Cloudflare is configured, deploy OvB services:"}),"\n",(0,s.jsxs)(n.p,{children:["Continue to ",(0,s.jsx)(n.strong,{children:"Environment Variables"})]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},8453(e,n,i){i.d(n,{R:()=>o,x:()=>t});var r=i(6540);const s={},l=r.createContext(s);function o(e){const n=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),r.createElement(l.Provider,{value:n},e.children)}}}]);